{% extends "predictions/layout.html" %}
{% load markdown_extras %}
{% block title %}
GPTSportsWriter - Props
{% endblock %}
{% block content %}
<script>

    function openLoader() {
        document.getElementById("loadingModal").style.display = "block";
        document.getElementById("submitBtn").disabled = true;
    }
    
    </script>

<p><center>AI Sports Prop Bets - Accurate, humorous and informative.</center></p>
<p><center><a href="{% url 'recent_props' %}">Recent Props</center></a>
<div pagename="props" style="padding:1em; font-size:14pt;">
    <form onsubmit="openLoader()" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <select name="sport" style="width:15em;" id="sport">
            <option value="no_sport">Select a Sport</option>
            {% for sport in sports %}
            <option value="{{sport}}">{{sport}}</option>
            {% endfor %}
        </select>
        <br/>
        <select name="game" style="width:15em;" id="game">
            {% for game in games %}
            <option value="{{game}}">{{game}}</option>
            {% endfor %}
        </select>
        <br/>
        <button id="submitBtn" type="submit" value="submit" style="width:8em; height:3em;" enabled>Submit</button>
    </form>
    <div id="loadingModal" style="display: none;">
        <button class="btn btn-primary" type="button" disabled>
          <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
          Warning: match analysis may cause frustration. Prolonged exposure may lead to questioning life choices.
        </button>
    </div>
       
      <div id="data-box">
        <p>
            <strong>Props: {{ user_input }}</strong>
        </p>

        {% if image_url %}
            <img src="{{ image_url }}" alt="Generated Image" style="max-width:80vw; max-height:80vh; object-fit: contain;">
        </p>
    {% endif %}
    {% if generated_prediction %}
        <p>{{ generated_prediction | markdown | safe }}</p>
    {% endif %}
    </div>
</div>
{% endblock %}